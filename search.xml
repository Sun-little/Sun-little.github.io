<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>泛型的使用</title>
      <link href="/posts/3eeb.html"/>
      <url>/posts/3eeb.html</url>
      
        <content type="html"><![CDATA[<h4 id="泛型："><a href="#泛型：" class="headerlink" title="泛型："></a>泛型：</h4><p>​        泛指的类型，可以代表任意类的   可以在类的后面指定泛型 public class 类名 &lt;泛型&gt;</p><p>​        在类上面定义了泛型后，可以在当前类中的任意位置使用当前泛型，可以在属性的类型，参数</p><p>​        的类型，方法的返回值等等。</p><p>​        当我们创建一个泛型类对象时，需要给泛型指定具体数据类型</p><p>​        在创建对象时如果没有指定泛型的类型，那么泛型默认为Object类型</p><p>​        类名  对象 = new 类名（）； –&gt;Object</p><h4 id="？通配符可以再创建对象时使用，用于表示任意的类型"><a href="#？通配符可以再创建对象时使用，用于表示任意的类型" class="headerlink" title="？通配符可以再创建对象时使用，用于表示任意的类型"></a>？通配符可以再创建对象时使用，用于表示任意的类型</h4><p>​    可以使用通配符设置泛型的范围</p><p>​    设置上限  ？extends类  表示使用时必须指定一个父类的子类类型或者父类本身</p><p>​    设置下限  ？super 类  表示使用时必须指定一个类的时指定类的父类，或者时类本身</p><p>​    在声明对象时可以使用范围限制或通配符，但在new出对象是一定要指定类型</p><p>​    通配符的写法可以使用在方法的参数，方法的返回值，已经声明的变量</p><h4 id="3、泛型的应用"><a href="#3、泛型的应用" class="headerlink" title="3、泛型的应用"></a>3、泛型的应用</h4><p>​    1.在泛型中使用，可以直接使用任意的泛型所表示的单词（T,K）public class 类&lt;T,K&gt;</p><p>​        那么在类中可以直接使用T或K类型</p><p>​    2.在其他类中使用泛型类，那么主要就是创建泛型对象</p><p>​        a、不指定泛型 类 变量 =new 类（）；泛型默认为OBject</p><p>​        b、指定类型 类&lt;具体的类型，具体的练习&gt; 对象=new 类&lt;具体的类型，具体的练习&gt;</p><p>​        c、指定任意类型 类&lt;？&gt;对象=new 类&lt;具体的类型&gt;（）；</p><p>​        d、指定类型的范围-上限 类&lt;？extends 类&gt;对象 =new 类&lt;具体的类型&gt;（）；</p><p>代码在类名后面多出了 &lt;T1, T2&gt;，T1, T2 是自定义的标识符，也是参数，用来传递数据的类型，而不是数据的值，我们称之为类型参数。在泛型中，不但数据的值可以通过参数传递，数据的类型也可以通过参数传递。T1, T2 只是数据类型的占位符，运行时会被替换为真正的数据类型。</p><pre class=" language-java"><code class="language-java"><span class="token keyword">class</span> <span class="token class-name">Book</span><span class="token operator">&lt;</span>T1，T2<span class="token operator">></span><span class="token punctuation">{</span>    T1 a<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pprr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span>T1 t<span class="token punctuation">)</span> <span class="token punctuation">{</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        Pet a<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        Book <span class="token operator">&lt;</span>String<span class="token operator">></span> bos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Book</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>传值参数（我们通常所说的参数）由小括号包围，如 (int x, double y)，类型参数（泛型参数）由尖括号包围，多个参数由逗号分隔，如 <t> 或 &lt;T, E&gt;。</t></p><p>类型参数需要在类名后面给出。一旦给出了类型参数，就可以在类中使用了。类型参数必须是一个合法的标识符，习惯上使用单个大写字母，通常情况下，K 表示键，V 表示值，E 表示异常或错误，T 表示一般意义上的数据类型。</p><p>泛型类在实例化时必须指出具体的类型，也就是向类型参数传值，格式为：<br>    className variable&lt;dataType1, dataType2&gt; = new className&lt;dataType1, dataType2&gt;();<br>也可以省略等号右边的数据类型，但是会产生警告，即：<br>    className variable&lt;dataType1, dataType2&gt; = new className();</p><p>因为在使用泛型类时指明了数据类型，赋给其他类型的值会抛出异常，既不需要向下转型，也没有潜在的风险，比本文一开始介绍的自动装箱和向上转型要更加实用。</p><h6 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h6><ul><li>泛型是 Java 1.5 的新增特性，它以C++模板为参照，本质是参数化类型(Parameterized Type)的应用。</li><li>类型参数只能用来表示引用类型，不能用来表示基本类型，如  int、double、char 等。但是传递基本类型不会报错，因为它们会自动装箱成对应的包装类。</li></ul><h4 id="泛型方法"><a href="#泛型方法" class="headerlink" title="泛型方法"></a>泛型方法</h4><pre><code>// 定义泛型方法public &lt;T1, T2&gt; void printPoint(T1 x, T2 y){T1 m = x;T2 n = y;System.out.println("This point is：" + m + ", " + n);}</code></pre><p>类型参数需要放在修饰符后面、返回值类型前面。一旦定义了类型参数，就可以在参数列表、方法体和返回值类型中使用了。<br>与使用泛型类不同，使用泛型方法时不必指明参数类型，编译器会根据传递的参数自动查找出具体的类型。泛型方法除了定义不同，调用就像普通方法一样。 </p><p><strong>注意：</strong>泛型方法与泛型类没有必然的联系，泛型方法有自己的类型参数，在普通类中也可以定义泛型方法。泛型方法 中的类型参数  与泛型类 P中的类型参数 没有必然的联系，也可以使用其他的标识符代替。</p><h2 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h2><p> 在Java中也可以定义泛型接口，这里不再赘述，仅仅给出示例代码</p><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String arsg<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        Info<span class="token operator">&lt;</span>String<span class="token operator">></span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InfoImp</span><span class="token operator">&lt;</span>String<span class="token operator">></span><span class="token punctuation">(</span><span class="token string">"www.weixueyuan.net"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Length Of String: "</span> <span class="token operator">+</span> obj<span class="token punctuation">.</span><span class="token function">getVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//定义泛型接口</span><span class="token keyword">interface</span> <span class="token class-name">Info</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> T <span class="token function">getVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment" spellcheck="true">//实现接口</span><span class="token keyword">class</span> <span class="token class-name">InfoImp</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token keyword">implements</span> <span class="token class-name">Info</span><span class="token operator">&lt;</span>T<span class="token operator">></span> <span class="token punctuation">{</span>    <span class="token keyword">private</span> T var<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 定义泛型构造方法</span>    <span class="token keyword">public</span> <span class="token function">InfoImp</span><span class="token punctuation">(</span>T var<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setVar</span><span class="token punctuation">(</span>var<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVar</span><span class="token punctuation">(</span>T var<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>var <span class="token operator">=</span> var<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> T <span class="token function">getVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>var<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><p> 运行结果：Length Of String: 18</p><h2 id="类型擦除"><a href="#类型擦除" class="headerlink" title="类型擦除"></a>类型擦除</h2><p> 如果在使用泛型时没有指明数据类型，那么就会擦除泛型类型，请看下面的代码： </p><pre><code>public class Demo {    public static void main(String[] args){        Point p = new Point();  // 类型擦除        p.setX(10);        p.setY(20.8);        int x = (Integer)p.getX();  // 向下转型        double y = (Double)p.getY();        System.out.println("This point is：" + x + ", " + y);    }}class Point&lt;T1, T2&gt;{    T1 x;    T2 y;    public T1 getX() {        return x;    }    public void setX(T1 x) {        this.x = x;    }    public T2 getY() {        return y;    }    public void setY(T2 y) {        this.y = y;    }}</code></pre><p> 运行结果：</p><h2 id="限制泛型的可用类型"><a href="#限制泛型的可用类型" class="headerlink" title="限制泛型的可用类型"></a>限制泛型的可用类型</h2><p> 在上面的代码中，类型参数可以接受任意的数据类型，只要它是被定义过的。但是，很多时候我们只需要一部分数据类型就够了，用户传递其他数据类型可能会引起错误。例如，编写一个泛型函数用于返回不同类型数组（Integer 数组、Double 数组、Character 数组等）中的最大值： </p><pre><code>public &lt;T&gt; T getMax(T array[]){    T max = null;    for(T element : array){        max = element.doubleValue() &gt; max.doubleValue() ? element : max;    }    return max;}</code></pre><p> 上面的代码会报错，doubleValue() 是 Number 类的方法，不是所有的类都有该方法，所以我们要限制类型参数 T，让它只能接受 Number 及其子类（Integer、Double、Character 等）。</p><pre><code>public &lt;T extends Number&gt; T getMax(T array[]){    T max = null;    for(T element : array){        max = element.doubleValue() &gt; max.doubleValue() ? element : max;    }    return max;}</code></pre><p> <t extends="" number=""> 表示 T 只接受 Number 及其子类，传入其他类型的数据会报错。这里的限定使用关键字 extends，后面可以是类也可以是接口。但这里的 extends 已经不是继承的含义了，应该理解为 T 是继承自 Number 类的类型，或者 T 是实现了 XX 接口的类型。</t></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
